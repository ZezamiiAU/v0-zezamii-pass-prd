{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Tenant Configuration Schema",
  "description": "Schema for ZezamiiPass tenant configuration",
  "type": "object",
  "required": ["organization", "sites", "devices", "passTypes"],
  "properties": {
    "version": {
      "type": "string",
      "description": "Schema version"
    },
    "generatedAt": {
      "type": "string",
      "format": "date-time",
      "description": "When this config was generated"
    },
    "organization": {
      "type": "object",
      "required": ["id", "name", "slug", "contact_email", "timezone"],
      "properties": {
        "id": { "type": "string", "format": "uuid" },
        "name": { "type": "string", "minLength": 1 },
        "slug": { "type": "string", "pattern": "^[a-z0-9-]+$" },
        "logo_url": { "type": ["string", "null"], "format": "uri" },
        "primary_color": { "type": "string", "pattern": "^#[0-9A-Fa-f]{6}$" },
        "secondary_color": { "type": "string", "pattern": "^#[0-9A-Fa-f]{6}$" },
        "contact_email": { "type": "string", "format": "email" },
        "contact_phone": { "type": "string" },
        "support_email": { "type": "string", "format": "email" },
        "address": { "type": "string" },
        "city": { "type": "string" },
        "state": { "type": "string" },
        "country": { "type": "string" },
        "postal_code": { "type": "string" },
        "timezone": { "type": "string" },
        "is_active": { "type": "boolean" },
        "notes": { "type": "string" }
      }
    },
    "sites": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "organization_id", "name", "timezone"],
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "organization_id": { "type": "string", "format": "uuid" },
          "name": { "type": "string" },
          "slug": { "type": "string", "pattern": "^[a-z0-9-]+$" },
          "address": { "type": "string" },
          "city": { "type": "string" },
          "state": { "type": "string" },
          "country": { "type": "string" },
          "postal_code": { "type": "string" },
          "timezone": { "type": "string" },
          "is_active": { "type": "boolean" },
          "notes": { "type": "string" }
        }
      }
    },
    "buildings": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "site_id", "name"],
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "site_id": { "type": "string", "format": "uuid" },
          "name": { "type": "string" },
          "address": { "type": "string" },
          "floors": { "type": "integer", "minimum": 1 },
          "is_active": { "type": "boolean" },
          "notes": { "type": "string" }
        }
      }
    },
    "floors": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "building_id", "name", "level"],
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "building_id": { "type": "string", "format": "uuid" },
          "name": { "type": "string" },
          "level": { "type": "integer" },
          "is_active": { "type": "boolean" },
          "notes": { "type": "string" }
        }
      }
    },
    "devices": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "floor_id", "name", "device_type"],
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "floor_id": { "type": "string", "format": "uuid" },
          "name": { "type": "string" },
          "device_type": { "type": "string" },
          "manufacturer": { "type": "string" },
          "model": { "type": "string" },
          "serial_number": { "type": "string" },
          "mac_address": { "type": "string" },
          "ip_address": { "type": "string" },
          "firmware_version": { "type": "string" },
          "lock_id": { "type": "string" },
          "is_active": { "type": "boolean" },
          "notes": { "type": "string" }
        }
      }
    },
    "passTypes": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "organization_id", "name", "duration_hours", "price_cents"],
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "organization_id": { "type": "string", "format": "uuid" },
          "name": { "type": "string" },
          "description": { "type": "string" },
          "duration_hours": { "type": "number", "minimum": 0 },
          "price_cents": { "type": "integer", "minimum": 0 },
          "stripe_product_id": { "type": ["string", "null"] },
          "stripe_price_id": { "type": ["string", "null"] },
          "max_uses": { "type": "integer", "minimum": 1 },
          "is_active": { "type": "boolean" },
          "display_order": { "type": "integer" },
          "notes": { "type": "string" }
        }
      }
    },
    "accesspointSlugs": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["slug", "device_id"],
        "properties": {
          "slug": { "type": "string", "pattern": "^[a-z0-9-]+$" },
          "device_id": { "type": "string", "format": "uuid" },
          "custom_name": { "type": "string" },
          "custom_description": { "type": "string" },
          "custom_logo_url": { "type": ["string", "null"], "format": "uri" },
          "is_active": { "type": "boolean" },
          "notes": { "type": "string" }
        }
      }
    },
    "integrations": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "organization_id", "integration_type", "name"],
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "organization_id": { "type": "string", "format": "uuid" },
          "integration_type": { "type": "string" },
          "name": { "type": "string" },
          "base_url": { "type": "string", "format": "uri" },
          "api_key": { "type": "string" },
          "property_id": { "type": "string" },
          "webhook_secret": { "type": "string" },
          "config_json": { "type": "object" },
          "is_active": { "type": "boolean" },
          "notes": { "type": "string" }
        }
      }
    }
  }
}
